(this["webpackJsonpmerge-split-pdf-react-app"]=this["webpackJsonpmerge-split-pdf-react-app"]||[]).push([[0],{394:function(e,t,n){"use strict";n.r(t);var i=n(0),s=n.n(i),a=n(15),l=n.n(a),o=n(423),r=n(424),c=n(207),d=n(98),p=n.n(d),h=n(99),g=n.n(h),u={palette:{primary:{light:p.a[300],main:p.a[500],dark:p.a[700]},secondary:{light:g.a[300],main:g.a[500],dark:g.a[700]}},typography:{useNextVariants:!0}},m=Object(c.a)(u),f=n(79),j=n(428),b=n(422),O=n(420),x=n(11),v=n(137),y=n(80),F=n(81),w=n(97),L=n(95),M=n(419),C=n(426),N=n(179),S=n.n(N),k=n(425),P=n(421),A=n(427),R=n(2);function D(){return Math.round(20*Math.random())-10}function G(){var e=50+D(),t=50+D();return{top:"".concat(e,"%"),left:"".concat(t,"%"),transform:"translate(-".concat(e,"%, -").concat(t,"%)")}}var B=function(e){Object(w.a)(n,e);var t=Object(L.a)(n);function n(e){var i;return Object(y.a)(this,n),(i=t.call(this,e)).handleOpen=function(){i.setState({open:!0})},i.handleClose=function(){i.setState({open:!1})},i.handleCloseAfterUpload=function(){i.setState({open:!1,loading:!1,modalQuery:"idle",msg:{err:null,success:null},respMsg:null}),i.filesClearAndRemoveAll()},i.handleLoadingProgress=function(){i.setState({loading:!0,modalQuery:"progress"})},i.handleResponseProgress=function(e,t){i.setState({loading:!1,modalQuery:e,respMsg:t})},i.handleIdleProgress=function(){i.setState({loading:!1,modalQuery:"idle"})},i.state={open:!!e.isOpen&&e.isOpen,loading:e.isLoading,modalQuery:"idle",msg:e.msg,respMsg:null},i.filesClearAndRemoveAll=e.clearModalStatus,i}return Object(F.a)(n,[{key:"componentWillReceiveProps",value:function(e){e.hasOwnProperty("isOpen")&&e.hasOwnProperty("isLoading")&&e.hasOwnProperty("msg")&&(e.isOpen&&this.handleOpen(),e.isLoading?this.handleLoadingProgress():null!=e.msg.err?this.handleResponseProgress("error",e.msg.err):null!=e.msg.success&&this.handleResponseProgress("success",e.msg.success))}},{key:"render",value:function(){var e=this.props.classes;return Object(R.jsx)("div",{children:Object(R.jsx)(k.a,{disableBackdropClick:!0,disableEscapeKeyDown:!0,"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",open:this.state.open,onClose:this.handleClose,children:Object(R.jsxs)("div",{style:G(),className:e.paper,children:["progress"!==this.state.modalQuery?Object(R.jsxs)(M.a,{container:!0,spacing:32,justify:"center",children:[Object(R.jsx)(M.a,{item:!0,children:Object(R.jsx)(O.a,{children:this.state.respMsg})}),Object(R.jsx)(M.a,{item:!0,children:Object(R.jsx)(C.a,{variant:"contained",color:"primary",onClick:this.handleCloseAfterUpload,children:"New merge"})})]}):Object(R.jsxs)("div",{children:[Object(R.jsx)(A.a,{in:"progress"===this.state.modalQuery,style:{transitionDelay:"progress"===this.state.modalQuery?"800ms":"0ms"},unmountOnExit:!0,children:Object(R.jsx)(P.a,{})}),Object(R.jsx)(O.a,{children:"Merging..."})]}),Object(R.jsx)(E,{})]})})})}}]),n}(s.a.Component),E=Object(x.a)((function(e){return{paper:{position:"absolute",width:50*e.spacing.unit,backgroundColor:e.palette.background.paper,boxShadow:e.shadows[5],padding:4*e.spacing.unit,outline:"none",textAlign:"center"}}}))(B),Z=E,W=n(53);var Q={mergeBetweenPDF:function(e){var t={pdfFile:null,pdfNotMergedList:[]};if(e.length>0){(new FileReader).onload=function(e){console.log(e.target.result)};var n=W.a.create(),i=W.a.create(),s=[],a=[],l=[];return e.forEach((function(e){s.push(fetch(URL.createObjectURL(e)).then((function(e){return e.arrayBuffer()})))})),Promise.all(s).then((function(s){for(var o=0;o<s.length;o++)try{i=W.a.load(new Uint8Array(s[o])),l=i.getPages(),i=W.a.create(),l.forEach((function(e){i.addPage(e)})),l.forEach((function(e){n.addPage(e)}))}catch(r){console.log(r),a.push(e[o].name)}return t.pdfFile=W.b.saveToBytes(n),t.pdfNotMergedList=a,t})).catch((function(e){return console.log(e),t.pdfFile=null,t.pdfNotMergedList=a,t}))}}},U=n(205),z=n(208),I=function(e){Object(w.a)(n,e);var t=Object(L.a)(n);function n(){var e;Object(y.a)(this,n);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))).state={files:[],hasFiles:!1,modalOpen:!1,modalLoading:!1,modalMsg:{err:null,success:null}},e.onFilesChange=function(t){e.setState({files:t,hasFiles:t.length>0},(function(){}))},e.onFilesError=function(e,t){console.log("[LOG] Error code "+e.code+": "+e.message)},e.filesRemoveOne=function(t){e.refs.files.removeFile(t)},e.filesClearAndRemoveAll=function(){e.setState({modalOpen:!1,modalLoading:!1,modalMsg:{err:null,success:null}},(function(){e.filesRemoveAll()}))},e.filesRemoveAll=function(){e.setState({files:[],hasFiles:!1},(function(){e.refs.files.removeFiles()}))},e.startMerge=function(){var t;e.setState({files:e.state.files,hasFiles:!1,modalOpen:!0,modalLoading:!0},(function(){console.log("[LOG] Starting merge...")})),Q.mergeBetweenPDF(e.state.files).then((function(n){if(n&&n.hasOwnProperty("pdfFile")){if(n.pdfFile){if(n.pdfNotMergedList.length!==e.state.files.length){var i="output_merge_"+(new Date).toISOString().replace(":","_").replace("T","_").replace("Z","")+".pdf";Object(U.saveSync)(n.pdfFile,i)}n.pdfNotMergedList.length>0?(t=n.pdfNotMergedList.length>0&&n.pdfNotMergedList.length===e.state.files.length?"No merge PDF output could be done. Following files have problem and need to be merged manually: "+n.pdfNotMergedList.join(", "):"Following files have problem and need to be merged manually: "+n.pdfNotMergedList.join(", "),console.log("[LOG] "+t),e.setState({modalOpen:!0,modalLoading:!1,modalMsg:{err:t,success:null}},(function(){console.log("[LOG] Modal closed.")}))):(t="Merge totally successfull and downloaded!",console.log("[LOG] "+t),e.setState({modalOpen:!0,modalLoading:!1,modalMsg:{err:null,success:t}},(function(){console.log("[LOG] Closed modal")})))}}else t="Internal error at merging! Send this error to the developer in charge.",console.log(t),e.setState({modalOpen:!0,modalLoading:!1,modalMsg:{err:t,success:null}},(function(){console.log("[LOG] Closed modal")}))})).catch((function(e){console.log("[LOG] "+e)})).finally((function(){return e.filesRemoveAll()}))},e}return Object(F.a)(n,[{key:"render",value:function(){var e=this,t=this.props.classes,n=this,i={onDragEnd:function(e,t){var i=n.state.files,s=i.splice(e,1)[0];i.splice(t,0,s),n.setState({files:i})},nodeSelector:"li",handleSelector:"a"};return Object(R.jsxs)("div",{className:"files",children:[Object(R.jsx)(M.a,{container:!0,spacing:32,justify:"center",children:Object(R.jsx)(M.a,{item:!0,className:t.dropFilesGridZone,children:Object(R.jsx)(S.a,{ref:"files",className:t.dropFilesZone,onChange:this.onFilesChange,onError:this.onFilesError,accepts:[".pdf"],multiple:!0,maxFiles:1e3,maxFileSize:1e7,minFileSize:0,clickable:!0,children:Object(R.jsx)("div",{className:t.dropFilesZoneDiv,children:"Drop files here or click to upload"})})})}),Object(R.jsx)(M.a,{container:!0,spacing:32,justify:"center",children:this.state.files.length>0?Object(R.jsx)(M.a,{item:!0,className:t.dropFilesGridZone,children:Object(R.jsx)("div",{className:"files-list",children:Object(R.jsx)(z.a,Object(v.a)(Object(v.a)({},i),{},{children:Object(R.jsx)("ol",{children:this.state.files.map((function(t){return Object(R.jsx)("li",{className:"files-list-item",children:Object(R.jsxs)("div",{style:{display:"flex"},children:[Object(R.jsxs)("div",{style:{width:"90%"},children:[Object(R.jsx)("div",{className:"files-list-item-content-item files-list-item-content-item-1",children:Object(R.jsx)("a",{href:"#",children:t.name})}),Object(R.jsx)("div",{className:"files-list-item-content-item files-list-item-content-item-2",children:t.sizeReadable})]}),Object(R.jsx)("div",{id:t.id,style:{"font-size":"20px",cursor:"pointer"},onClick:e.filesRemoveOne.bind(e,t),children:"\u2612"})]})},t.id)}))})}))})}):Object(R.jsx)(M.a,{item:!0,className:t.dropFilesWarningGridZone,children:Object(R.jsx)("div",{className:"files-list",children:"No files selected!"})})}),Object(R.jsxs)(M.a,{container:!0,spacing:16,justify:"center",children:[Object(R.jsx)(M.a,{item:!0,children:Object(R.jsx)(C.a,{variant:"contained",color:"primary",disabled:!this.state.hasFiles,onClick:this.startMerge,children:"Start merge"})}),Object(R.jsx)(M.a,{item:!0,children:Object(R.jsx)(C.a,{variant:"outlined",color:"secondary",onClick:this.filesClearAndRemoveAll,children:"Clear selection"})})]}),Object(R.jsx)(Z,{isOpen:this.state.modalOpen,isLoading:this.state.modalLoading,msg:this.state.modalMsg,clearModalStatus:this.filesClearAndRemoveAll})]})}}]),n}(i.Component),T=Object(x.a)((function(e){return{dropFilesGridZone:{width:"70%"},dropFilesZone:{padding:"2em",border:"2px dashed rgba(0, 0, 0, .1)",color:"rgba(0, 0, 0, .4)",width:"100%",display:"flex",flexWrap:"wrap",boxSizing:"border-box",textAlign:"center"},dropFilesZoneDiv:{width:"100%"},dropFilesWarningGridZone:{width:"70%",textAlign:"center",color:"red",fontWeight:"bold"}}}),{name:"MuiFilesDragDrop"})(I),_=Object(x.a)((function(e){return{appBar:{position:"relative"},icon:{marginRight:2*e.spacing.unit},heroUnit:{backgroundColor:e.palette.background.paper},heroContent:{maxWidth:600,margin:"0 auto",padding:"".concat(8*e.spacing.unit,"px 0 ").concat(6*e.spacing.unit,"px")},heroButtons:{marginTop:4*e.spacing.unit},layout:Object(f.a)({width:"auto",marginLeft:3*e.spacing.unit,marginRight:3*e.spacing.unit},e.breakpoints.up(1100+3*e.spacing.unit*2),{width:1100,marginLeft:"auto",marginRight:"auto"}),cardGrid:{padding:"".concat(8*e.spacing.unit,"px 0")},card:{height:"100%",display:"flex",flexDirection:"column"},cardMedia:{paddingTop:"56.25%"},cardContent:{flexGrow:1},footer:{backgroundColor:e.palette.background.paper,padding:6*e.spacing.unit}}}))((function(e){var t=e.classes;return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(j.a,{position:"static",className:t.appBar,children:Object(R.jsx)(b.a,{children:Object(R.jsx)(O.a,{variant:"h6",color:"inherit",noWrap:!0,children:"PDF APP"})})}),Object(R.jsx)("main",{children:Object(R.jsx)("div",{className:t.heroUnit,children:Object(R.jsxs)("div",{className:t.heroContent,children:[Object(R.jsx)(O.a,{component:"h1",variant:"h2",align:"center",color:"textPrimary",gutterBottom:!0,children:"Merge your PDFs"}),Object(R.jsx)("div",{className:t.heroButtons,children:Object(R.jsx)(T,{})})]})})})]})})),J=function(){return Object(R.jsxs)(o.a,{theme:m,children:[Object(R.jsx)(r.a,{}),Object(R.jsx)(_,{})]})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(Object(R.jsx)(J,{}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[394,1,2]]]);
//# sourceMappingURL=main.01257697.chunk.js.map